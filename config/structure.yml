- title: About This Book
  content:
    - source: README.md
- title: Language Structure
  id: language
  content:
    - source: content/language.md
    - source: "doc/syntax/miscellaneous.md#Ending an Expression"
      header_shift: 0
    - source: "doc/syntax/miscellaneous.md#Indentation"
      header_shift: 0
    - source: "doc/syntax/miscellaneous.md#`defined?`"
      header_shift: 0
    - source: "doc/syntax/miscellaneous.md#`BEGIN` and `END`"
      header_shift: 0
    # Rewritten
    # - source: doc/syntax.md
  children:
    - title: Keywords
      content:
        - source: doc/keywords.md
    - title: Literals
      content:
        # TODO: Needs rewrite accordingly to our structure
        - source: doc/syntax/literals.md
    - title: Variables and Constants
      content:
        - source: '# Variables and Constants'
        - source: '## Local Variables'
        - source: "doc/syntax/assignment.md#Local Variable Names"
          remove: "## Local Variable Names"
        - source: "doc/syntax/assignment.md#Local Variable Scope"
        - source: "doc/syntax/assignment.md#Local Variables and Methods"
        - source: "doc/syntax/assignment.md#Instance Variables"
          header_shift: 0
        - source: "doc/syntax/assignment.md#Class Variables"
          header_shift: 0
        - source: "doc/syntax/assignment.md#Global Variables"
          header_shift: 0
        - source: content/language/constants.md
    - title: Assignment
      content:
        - source: "doc/syntax/assignment.md#Assignment"
        - source: "doc/syntax/assignment.md#Abbreviated Assignment"
        - source: "doc/syntax/assignment.md#Implicit Array Assignment"
        - source: "doc/syntax/assignment.md#Multiple Assignment"
        - source: "doc/syntax/assignment.md#Array Decomposition"
        # TODO: Assignment methods: here or in Methods (with link here)?..
    - title: Control Expressions
      content:
        - source: doc/syntax/control_expressions.md
          remove:
            - "The `for` loop is similar"
            - "The `for` loop is rarely used"
          insert:
            - after: "The result value of a `for`"
              source: content/syntax/control_expressions/_for_vs_each.md
    - title: Defining methods
      id: methods-def
      content:
        - source: doc/syntax/methods.md
          insert:
            - after: "When called, the arguments"
              source: "content/language/methods/_underscore.md"
            - after: "When mixing keyword arguments"
              source: "content/language/methods/_keyword_vars.md"
            - after: "If you wish to rescue an exception"
              source: "content/language/methods/_expression.md"
        - source: "doc/syntax/miscellaneous.md#`alias`"
        - source: "doc/syntax/miscellaneous.md#`undef`"
        # TODO: Advanced methods: expressions & DSLs
    - title: Calling methods
      id: methods-call
      content:
        - source: doc/syntax/calling_methods.md
    - title: Modules and Classes
      content:
        - source: doc/syntax/modules_and_classes.md
          insert:
            - after: "The third visibility is `private`."
              source: "content/language/modules_and_classes/_visibility.md"
    - title: Exceptions
      content:
        - source: doc/syntax/exceptions.md
    - title: Refinements
      content:
        - source: doc/syntax/refinements.md
    - title: Precedence
      content:
        - source: doc/syntax/precedence.md
    - title: File Structure
      id: files
      content:
        - source: content/language/files.md
    - title: Globals
      content:
        - source: doc/globals.md
        - source: lib/English/English.md
    - title: Metaprogramming
      content:
        - source: content/language/metaprogramming.md
- title: Built-in Classes
  id: builtin
  content:
    - source: content/builtin.md
  children:
    - title: Language Core
      id: core
      content:
        - source: content/core/core.md
        - source: core/Kernel.md
        - source: core/BasicObject.md
        - source: core/Object.md
        - source: core/Module.md
        - source: core/Class.md
        - source: core/Method.md
        - source: core/UnboundMethod.md
          header_shift: 2
        - source: core/Proc.md
        - source: core/Fiber.md
        - source: core/Binding.md
        # Deprecated/obsolete, see https://bugs.ruby-lang.org/issues/10548
        # - source: core/Continuation.md

    - title: Value Types
      id: types
      content:
        - source: content/core/types.md
        - source: core/TrueClass.md
        - source: core/FalseClass.md
        - source: core/NilClass.md
        - source: core/Comparable.md
      children:
        - title: Numbers
          content:
            - source: core/Numeric.md
            - source: core/Integer.md
            - source: core/Float.md
            - source: core/Rational.md
            - source: core/Complex.md
            - source: '## BigDecimal'
            - source: ext/bigdecimal/BigDecimal.md#Introduction
              remove: '## Introduction'
              process:
                - [stdlib, bigdecimal]
            - source: ext/bigdecimal/BigDecimal.md#_ref
            # - source: ext/bigdecimal/BigMath.md
            # - source: ext/bigdecimal/Jacobian.md
            # - source: ext/bigdecimal/LUSolve.md
            # - source: ext/bigdecimal/Newton.md
            - source: '## Number Utilities'
            - source: core/Math.md
              header_shift: 2
            - source: lib/prime/Prime.md
              header_shift: 2
              process:
                - [stdlib, prime]
        - title: Symbol and String
          content:
            - source: '# Symbol and String'
            - source: core/Symbol.md
            - source: core/String.md
          children:
            - title: Encodings
              content:
                - source: core/Encoding.md
                # Nothing documented there
                # - source: core/UnicodeNormalize.md
        - title: Regexp
          id: regexp
          content:
            - source: core/Regexp.md
            - source: core/MatchData.md
            # Just mentioning it here, but it is already included in Regexp docs by RDoc means
            # - source: doc/regexp.md
        - title: Range
          content:
            - source: core/Range.md
        - title: Struct
          content:
            - source: core/Struct.md
            - source: lib/ostruct/OpenStruct.md
              process:
                - [stdlib, ostruct]
        - title: Times and Dates
          content:
            - source: '# Times and Dates'
            - source: core/Time.md
              remove:
                - "# Examples"
                - "All of these examples"

            - source: content/builtin/core/time/_timerb.md
            - source: lib/time/Time.md#Examples
              remove: "## Examples"
            - source: "lib/time/Time.md#Converting to a String"
            - source: "lib/time/Time.md#Time.parse"
            - source: "lib/time/Time.md#Time.strptime"

            - source: ext/date/Date.md#Date
              process:
                - [stdlib, date]
            - source: ext/date/DateTime.md
              process:
                - [stdlib, date]
        - title: Collections
          content:
            - source: content/core/collections.md
            - source: core/Enumerable.md
            - source: core/Enumerator.md
          children:
            - title: Array
              content:
                - source: core/Array.md
            - title: Hash
              content:
                - source: core/Hash.md
            - title: Set
              content:
                - source: lib/set/Set.md
                  remove:
                    - '## Contact'
                    - '    - Akinori'
                  process:
                    - [stdlib, set]
                - source: lib/set/SortedSet.md
            - title: Matrix
              content:
                - source: lib/matrix/Matrix.md
                  process:
                    - [stdlib, matrix]
                - source: lib/matrix/Vector.md#Vector
                - source: lib/matrix/Vector.md#_ref

    - title: Errors and Warnings
      content:
        - source: core/Exception.md
        - source: core/Warning.md
      children:
        - title: Exception Classes
          content:
            - source: "# Built-in Exception Classes"
            # Order and depth here are corresponding to explanation in Exception class docs
            - source: core/NoMemoryError.md
            - source: core/ScriptError.md
            - source: core/LoadError.md
              header_shift: 2
            - source: core/NotImplementedError.md
              header_shift: 2
            - source: core/SyntaxError.md
              header_shift: 2
            - source: core/SecurityError.md
            - source: core/SignalException.md
            - source: core/Interrupt.md
              header_shift: 2
            - source: core/StandardError.md
            - source: core/ArgumentError.md
              header_shift: 2
            - source: core/UncaughtThrowError.md
              header_shift: 3
            - source: core/EncodingError.md
              header_shift: 2
            - source: core/FiberError.md
              header_shift: 2
            - source: core/IOError.md
              header_shift: 2
            - source: core/EOFError.md
              header_shift: 3
            - source: core/IndexError.md
              header_shift: 2
            - source: core/KeyError.md
              header_shift: 3
            - source: core/StopIteration.md
              header_shift: 3
            - source: core/LocalJumpError.md
              header_shift: 2
            - source: core/NameError.md
              header_shift: 2
            - source: core/NoMethodError.md
              header_shift: 3
            - source: core/RangeError.md
              header_shift: 2
            - source: core/FloatDomainError.md
              header_shift: 3
            - source: core/RegexpError.md
              header_shift: 2
            - source: core/RuntimeError.md
              header_shift: 2
            - source: core/FrozenError.md
              header_shift: 3
            - source: core/SystemCallError.md
              header_shift: 2
            - source: core/Errno.md
              header_shift: 3
            - source: core/ThreadError.md
              header_shift: 2
            - source: core/TypeError.md
              header_shift: 2
            - source: core/ZeroDivisionError.md
              header_shift: 2
            - source: core/SystemExit.md
            - source: core/SystemStackError.md
            - source: core/fatal.md
            # Definition is empty
            # - source: core/ClosedQueueError.md

    - title: System Programming and CLI
      id: system-cli
      content:
        # TODO: Intro
        - source: core/ENV.md
      children:
        - title: Processes and Signals
          content:
            - source: core/Process.md
            - source: core/Signal.md
        - title: IO Basics
          id: io
          content:
            - source: core/IO.md#IO
            # description of io/console removed from inside IO docs
            - source: core/IO.md#_ref
            - source: core/ARGF.md
            - source: core/File.md
            - source: ext/stringio/StringIO.md
              process:
                - [stdlib, stringio]
        - title: Filesystem
          content:
            - source: core/Dir.md
              remove: "The directory used"
            - source: core/File.md
            - source: core/File--Constants.md#_ref
            - source: core/FileTest.md#_ref
            - source: ext/pathname/Pathname.md#Pathname
              process:
                - [stdlib, pathname]
            - source: "ext/pathname/Pathname.md#Example 1: Using Pathname"
              remove: "### Example 1"
            - source: ext/pathname/Pathname.md#_ref
            - source: lib/tempfile/Tempfile.md#Tempfile
              process:
                - [stdlib, tempfile]
            - source: lib/tempfile/Tempfile.md#Synopsis
              remove: "## Synopsis"
            - source: lib/tempfile/Tempfile.md#_ref
            - source: "## FileUtils"
              process:
                - [stdlib, fileutils]
            - source: "lib/fileutils/FileUtils.md#module FileUtils"
              remove: "## module FileUtils"
            - source: "lib/fileutils/FileUtils.md#Module Functions"
              remove: "### Module Functions"
            - source: lib/fileutils/FileUtils.md#_ref
            - source: lib/find/Find.md
              process:
                - [stdlib, find]

    - title: Concurrency and Parallelism
      content:
        - source: core/Thread.md
        - source: core/ThreadGroup.md
        - source: core/Mutex.md
        - source: core/ConditionVariable.md
          header_shift: 2
        - source: core/Queue.md
        - source: core/SizedQueue.md
          header_shift: 2

    - title: Interpreter Internals
      id: internals
      content:
        - source: content/builtin/core/internals.md
        - source: core/ObjectSpace.md
        - source: >
            ### objspace standard library

            Standard library `objspace` provides some extensions for `ObjectSpace` module.
        - source: ext/objspace/ObjectSpace.md
          remove: "# ObjectSpace"
        - source: core/GC.md
        - source: core/TracePoint.md
        # TODO: RubyVM::InstructionSequence have some docs!
        # - source: core/RubyVM.md
    - title: Marshal
      content:
        - source: core/Marshal.md
        - source: doc/marshal.md
    - title: Random
      content:
        - source: core/Random.md
        - source: lib/securerandom/SecureRandom.md
          process:
            - [stdlib, securerandom]
          header_shift: 2
    # deprecated
    # - source: core/Data.md

- title: Standard Library
  part: true
  id: stdlib
  # TODO: Intro explaining the structure of docs
  # content:
  #   - source: doc/standard_library.md
  children:
    - title: Design Patterns
      id: patterns
      content:
        - source: "# Ruby implementation of common design patterns"
      children:
        - title: forwardable
          content:
            - source: lib/forwardable/Forwardable.md
            - source: lib/forwardable/SingleForwardable.md
        - title: delegate
          content:
            - source: lib/delegate/Delegator.md
            - source: lib/delegate/SimpleDelegator.md
        - title: observer
          content:
            - source: lib/observer/Observable.md
        - title: singleton
          content:
            - source: lib/singleton/Singleton.md
              remove_sections:
                - Implementation
                - Singleton and Marshal

    - title: Formats
      content:
        - source: content/stdlib/formats.md
      children:
        - title: csv
          content:
            - source: lib/csv/CSV.md
              remove_sections:
                - CSV and Character Encodings (M17n or Multilingualization)
        - title: json
          content:
            - source: ext/json/JSON.md
            # - source: ext/json/Class.md
        - title: yaml
          content:
            - source: lib/yaml/YAML.md
              remove_sections:
                - History
                - More info
            - source: ext/psych/Psych.md#_ref
        - title: "rexml: XML parser and generator"
          id: rexml
          content:
            - source: lib/rexml/REXML.md
        - title: rss
          content:
            - source: lib/rss/RSS.md
              remove_sections: Copyright
        - title: zlib
          content:
            - source: ext/zlib/Zlib.md
              remove_sections: Class tree

    - title: Development and Debugging
      content:
        - source: >
            # Development and Debugging Tools

            This chapter lists several tools that help developing in Ruby.
      children:
        - title: "pp: Debug Print"
          id: pp
          content:
            - source: lib/pp/PP.md
              remove_sections:
                - Pretty-Print JSON
                - Author
            - source: lib/prettyprint/PrettyPrint.md#_ref
        - title: logger
          content:
            - source: lib/logger/Logger.md
              remove: '## Description'
              remove_sections:
                - Features
                - HOWTOs
                - How to create a logger
                - How to log a message
                - How to close a logger
                - Setting severity threshold
        - title: "fiddle: FFI wrapper"
          id: fiddle
          content:
            - source: ext/fiddle/Fiddle.md
              remove:
                - 'A libffi wrapper'
                - '## Description'
        - title: "ripper: Parsing Ruby"
          id: ripper
          content:
            - source: ext/ripper/Ripper.md
              remove_sections:
                - Resources
                - Requirements
                - License
            # - source: ext/ripper/DSL.md
        # FIXME: Where is good place for it?..
        # - title: "racc: Parser Generator"
        #   id: racc
        #   content:
        #     - source: lib/racc/Racc.md

    - title: String Utilities
      content:
        - source: "# String Utilities"
      children:
        - title: "erb: Ruby Temlating"
          id: erb
          content:
            - source: "## ERB"
            - source: lib/erb/ERB.md#Introduction
              remove: "## Introduction"
            - source: lib/erb/ERB.md#Recognized Tags
            - source: lib/erb/ERB.md#Options
            - source: lib/erb/ERB.md#_ref
        - title: "strscan: Sequental String Scanner"
          id: strscan
          content:
            - source: ext/strscan/StringScanner.md#StringScanner
            - source: ext/strscan/StringScanner.md#_ref
        - title: scanf
          content:
            - source: '# scanf'
            - source: lib/scanf/Scanf.md#Description
              remove: '## Description'
            - source: "lib/scanf/Scanf.md#Basic usage"
            - source: "lib/scanf/Scanf.md#Block usage"
            - source: "lib/scanf/Scanf.md#_ref"

    - title: Networking and Web
      content:
        - source: "## Networking and Web Libraries"
      children:
        - title: cgi
          content:
            - source: lib/cgi/CGI.md
        - title: ipaddr
          content:
            - source: lib/ipaddr/IPAddr.md
              remove: '## Example'
        - title: "openuri: Open Files and URLs"
          id: openuri
          content:
            - source: lib/open-uri/OpenURI.md
              remove:
                - "## Example"
                - "* Author:"
        - title: socket
          content:
            - source: ext/socket/Socket.md
              remove_sections:
                - What's a socket?
                - Exception Handling
                - Convenience methods
                - Documentation by
            # - source: ext/socket/Addrinfo.md
            # - source: ext/socket/BasicSocket.md
            # - source: ext/socket/IPSocket.md
            # - source: ext/socket/SOCKSSocket.md
            # - source: ext/socket/SocketError.md
            # - source: ext/socket/TCPServer.md
            # - source: ext/socket/TCPSocket.md
            # - source: ext/socket/UDPSocket.md
            # - source: ext/socket/UNIXServer.md
            # - source: ext/socket/UNIXSocket.md
        - title: "webrick: Simple Web Server"
          id: webrick
          content:
            - source: "lib/webrick/WEBrick.md#WEB server toolkit."
            - source: "lib/webrick/WEBrick.md#Starting an HTTP server"
            - source: "lib/webrick/WEBrick.md#Custom Behavior"
            - source: lib/webrick/WEBrick.md#_ref
            # - source: lib/webrick/Errno.md
        - title: uri
          content:
            - source: lib/uri/URI.md
              remove_sections:
                - RFC References
                - Class tree
                - Copyright Info

    - title: System Programming and Console
      content:
        - source: lib/shell/Shell.md
        - source: lib/optparse/OptionParser.md
        - source: ext/etc/Etc.md
        - source: ext/pty/PTY.md
        # - source: ext/pty/IO.md
        - source: ext/fcntl/Fcntl.md
        - source: ext/readline/Readline.md
        - source: ext/win32ole/WIN32OLE.md
        - source: ext/syslog/Syslog.md
        - source: lib/open3/Open3.md
        # - source: ext/win32ole/IE_CONST.md
        # - source: ext/win32ole/IXMLDOMNode.md
        # - source: ext/win32ole/IXMLDOMParseError.md
        # - source: ext/win32ole/IXMLHttpRequest.md
        # - source: ext/win32ole/IXTLRuntime.md
        # - source: ext/win32ole/Microsoft_FreeThreadedXMLDOM_1_0.md
        # - source: ext/win32ole/Microsoft_XMLDOM_1_0.md
        # - source: ext/win32ole/Microsoft_XMLDSO_1_0.md
        # - source: ext/win32ole/Microsoft_XMLHTTP_1.md
        # - source: ext/win32ole/Msxml.md
        # - source: ext/win32ole/OLEProperty.md
        # - source: ext/win32ole/OLEtagDOMNodeType.md
        # - source: ext/win32ole/OLEtagXMLEMEM_TYPE.md
        # - source: ext/win32ole/WIN32OLERuntimeError.md
        # - source: ext/win32ole/WIN32OLE_EVENT.md
        # - source: ext/win32ole/WIN32OLE_METHOD.md
        # - source: ext/win32ole/WIN32OLE_PARAM.md
        # - source: ext/win32ole/WIN32OLE_RECORD.md
        # - source: ext/win32ole/WIN32OLE_TYPE.md
        # - source: ext/win32ole/WIN32OLE_TYPELIB.md
        # - source: ext/win32ole/WIN32OLE_VARIABLE.md
        # - source: ext/win32ole/WIN32OLE_VARIANT.md

    - title: Misc Utilities
      id: misc
      content:
      - source: lib/timeout/Timeout.md
      # - source: lib/timeout/Timeout--TimeoutError.md

    - title: Cryptography and Encoding
      content:
        - source: '# Cryptography and Encoding Libraries'
      children:
        - title: base64
          content:
          - source: lib/base64/Base64.md
        - title: 'digest: Digests Generation'
          id: digest
          content:
          - source: ext/digest/Digest.md
        - title: openssl
          content:
          - source: ext/openssl/OpenSSL.md

    # FIXME: If any of this used at all?..
    - title: Concurrency Utils
      content:
        - source: lib/monitor/Monitor.md
        - source: lib/monitor/MonitorMixin.md
        - source: lib/mutex_m/Mutex_m.md
        - source: lib/sync/Sync.md
        - source: lib/sync/Sync_m.md
        - source: lib/sync/Synchronizer.md
        - source: lib/sync/Synchronizer_m.md

    - title: Other Libraries
      id: other
      content:
        - source: lib/abbrev/Abbrev.md
        - source: lib/cmath/CMath.md
          remove: "# Trigonometric and transcendental"
          remove_sections: [Usage]
        - source: lib/getoptlong/GetoptLong.md

        - source: lib/e2mmap/Exception2MessageMapper.md#Exception2MessageMapper
        - source: lib/e2mmap/Exception2MessageMapper.md#_ref

        - source: ext/nkf/NKF.md#NKF
        - source: ext/nkf/NKF.md#_ref
        # - source: ext/nkf/Kconv.md

        - source: lib/pstore/PStore.md
          remove_sections:
            - "Usage example:"
            - Transaction modes
        - source: lib/rinda/Rinda.md
        - source: lib/resolv/Resolv.md
          remove_sections: [Bugs]
        - source: lib/shellwords/Shellwords.md
          remove: "## Manipulates strings like"
          remove_sections:
            - Usage
            - Authors
            - Contact
            - Resources
        - source: lib/thwait/ThreadsWait.md
        # - source: lib/thwait/ThWait.md
        - source: lib/tsort/TSort.md
          remove_sections:
            - A Simple Example
            - A More Realistic Example
            - Bugs
            - References
        - source: lib/weakref/WeakRef.md
        # - source: ext/win32/Win32.md
      children:
        - title: "drb: Distributed Ruby"
          id: drb
          content:
            - source: lib/drb/DRb.md
            # - source: lib/drb/ACL.md
            # - source: lib/drb/DRb--DRbIdConv.md
            # - source: lib/drb/DRb--DRbObject.md
            # - source: lib/drb/DRb--DRbUndumped.md
        - title: "dbm, gdbm, sdbm"
          id: dbm
          content:
            - source: '# DBM-alike Database Implementations'
            - source: ext/dbm/DBM.md
              remove: '## Introduction'
              remove_sections:
                - Cautions
                - Example
            # - source: ext/dbm/DBMError.md
            - source: '## GDBM'
            - source: ext/gdbm/GDBM.md#Summary
              remove: '## Summary'
            - source: ext/gdbm/GDBM.md#_ref
            - source: ext/sdbm/SDBM.md#SDBM
            - source: ext/sdbm/SDBM.md#_ref
            # - source: ext/sdbm/SDBMError.md


# - title: Advanced Topics
#   part: true
#   children:
#     - title: Third-Party Libraries
#       content:
#         - source: '# Third-Party Libraries'
#       children:
#         - title: RubyGems
#           source:
#             - source: lib/rubygems/Gem.md
#             # - source: lib/rubygems/Kernel.md
#             # - source: lib/rubygems/TempIO.md
#             # - source: lib/rubygems/YAML--Syck.md
#         - title: C Extensions
#           content:
#             - source: doc/extension.md
#             - source: lib/mkmf/MakeMakefile.md
#         # TODO: Bundler
#     - title: Tools and Approaches
#       content:
#         - source: '# Tools and Approaches'
#         # TODO: Move to separate parts
#         - source: lib/benchmark/Benchmark.md
#         - source: lib/debug/DEBUGGER__.md
#         - source: lib/tracer/Tracer.md
#         - source: ext/coverage/Coverage.md
#         - source: lib/profiler/Profiler__.md
#         - source: doc/dtrace_probes.md
#       children:
#         - title: Interactive Console
#           id: irb
#           content:
#             - source: lib/irb/IRB.md
#             # - source: lib/irb/XMP.md
#         - title: Documenting
#           id: rdoc
#           content:
#             - source: lib/rdoc/RDoc.md
#         # TODO: Code Style and Linting
#     - title: Language Development
#       cotnent:
#         - source: '# Development of Ruby'
#         - source: doc/contributing.md
#         - source: doc/contributors.md
#         - source: doc/maintainers.md
