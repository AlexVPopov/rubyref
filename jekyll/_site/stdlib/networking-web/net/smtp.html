


<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title> | </title>

        <link rel="stylesheet" href="/css/style.css">
        <link rel="stylesheet" href="/css/highlight.css">
        <link rel='stylesheet' href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800'>

        <!-- Font Awesome -->
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

        <!-- Fetch JQuery from CDN but have a local fallback -->
        <script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script>
            if (typeof jQuery == 'undefined') {
                document.write(unescape("%3Cscript src='/jquery.js'%3E%3C/script%3E"));
            }
        </script>
    </head>
    <body>
        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme = localStorage.getItem('theme');
            if (theme == null) { theme = 'light'; }
            $('body').removeClass().addClass(theme);
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = localStorage.getItem('sidebar');
            if (sidebar === "hidden") { $("html").addClass("sidebar-hidden") }
            else if (sidebar === "visible") { $("html").addClass("sidebar-visible") }
        </script>

        <div id="sidebar" class="sidebar">
            <ul class="chapter">

              
              <li>
                <a href="/about-this-book.html"> About This Book</a>
              </li>
                
              
              <li>
                <a href="/language.html"> Language Structure</a>
              </li>
                
                    <ul class="section">
                        
                          <li>
                            <a href="/language/keywords.html"> Keywords</a>
                          </li>
                        
                          <li>
                            <a href="/language/literals.html"> Literals</a>
                          </li>
                        
                          <li>
                            <a href="/language/variables-constants.html"> Variables and Constants</a>
                          </li>
                        
                          <li>
                            <a href="/language/assignment.html"> Assignment</a>
                          </li>
                        
                          <li>
                            <a href="/language/control-expressions.html"> Control Expressions</a>
                          </li>
                        
                          <li>
                            <a href="/language/methods-def.html"> Defining methods</a>
                          </li>
                        
                          <li>
                            <a href="/language/methods-call.html"> Calling methods</a>
                          </li>
                        
                          <li>
                            <a href="/language/modules-classes.html"> Modules and Classes</a>
                          </li>
                        
                          <li>
                            <a href="/language/exceptions.html"> Exceptions</a>
                          </li>
                        
                          <li>
                            <a href="/language/refinements.html"> Refinements</a>
                          </li>
                        
                          <li>
                            <a href="/language/precedence.html"> Precedence</a>
                          </li>
                        
                          <li>
                            <a href="/language/files.html"> File Structure</a>
                          </li>
                        
                          <li>
                            <a href="/language/globals.html"> Globals</a>
                          </li>
                        
                          <li>
                            <a href="/language/metaprogramming.html"> Metaprogramming</a>
                          </li>
                        
                    </ul>
                
              
              <li>
                <a href="/builtin.html"> Built-in Classes</a>
              </li>
                
                    <ul class="section">
                        
                          <li>
                            <a href="/builtin/core.html"> Language Core</a>
                          </li>
                        
                          <li>
                            <a href="/builtin/types.html"> Value Types</a>
                          </li>
                        
                          <li>
                            <a href="/builtin/errors-warnings.html"> Errors and Warnings</a>
                          </li>
                        
                          <li>
                            <a href="/builtin/system-cli.html"> System Programming and CLI</a>
                          </li>
                        
                          <li>
                            <a href="/builtin/concurrency-parallelism.html"> Concurrency and Parallelism</a>
                          </li>
                        
                          <li>
                            <a href="/builtin/internals.html"> Interpreter Internals</a>
                          </li>
                        
                          <li>
                            <a href="/builtin/marshal.html"> Marshal</a>
                          </li>
                        
                          <li>
                            <a href="/builtin/random.html"> Random</a>
                          </li>
                        
                    </ul>
                
              
              <li>
                <a href="/stdlib.html"> Standard Library</a>
              </li>
                
                    <ul class="section">
                        
                          <li>
                            <a href="/stdlib/patterns.html"> Design Patterns</a>
                          </li>
                        
                          <li>
                            <a href="/stdlib/formats.html"> Formats</a>
                          </li>
                        
                          <li>
                            <a href="/stdlib/development-debugging.html"> Development and Debugging</a>
                          </li>
                        
                          <li>
                            <a href="/stdlib/string-utilities.html"> String Utilities</a>
                          </li>
                        
                          <li>
                            <a href="/stdlib/networking-web.html"> Networking and Web</a>
                          </li>
                        
                          <li>
                            <a href="/stdlib/cli.html"> System Programming and CLI</a>
                          </li>
                        
                          <li>
                            <a href="/stdlib/cryptography-encoding.html"> Cryptography and Encoding</a>
                          </li>
                        
                          <li>
                            <a href="/stdlib/misc.html"> Miscellaneous Libraries</a>
                          </li>
                        
                    </ul>
                
              
              <li>
                <a href="/advanced-topics.html"> Advanced Topics</a>
              </li>
                
                    <ul class="section">
                        
                          <li>
                            <a href="/advanced-topics/third-party-libraries.html"> Third-Party Libraries</a>
                          </li>
                        
                          <li>
                            <a href="/advanced-topics/tools-approaches.html"> Tools and Approaches</a>
                          </li>
                        
                          <li>
                            <a href="/advanced-topics/contributing.html"> Contributing To Ruby</a>
                          </li>
                        
                    </ul>
                
              

            </ul>
        </div>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar" class="menu-bar">
                    <div class="left-buttons">
                        <i id="sidebar-toggle" class="fa fa-bars"></i>
                        <i id="theme-toggle" class="fa fa-paint-brush"></i>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <i id="print-button" class="fa fa-print" title="Print this book"></i>
                    </div>
                </div>

                 
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">require</span> <span class="s1">'net/smtp'</span>
</code></pre></div></div>

<h1 id="netsmtp">Net::SMTP</h1>

<p>This library provides functionality to send internet mail via SMTP, the
Simple Mail Transfer Protocol. For details of SMTP itself, see
<a href="http://www.ietf.org/rfc/rfc2821.txt">RFC2821</a>.</p>

<p>This library does NOT provide functions to compose internet mails. You
must create them by yourself. If you want better mail support, try
RubyMail or TMail or search for alternatives in
<a href="https://rubygems.org/">RubyGems.org</a> or <a href="https://www.ruby-toolbox.com/">The Ruby
Toolbox</a>.</p>

<p>FYI: the official documentation on internet mail is:
<a href="http://www.ietf.org/rfc/rfc2822.txt">RFC2822</a>.</p>

<h2 id="examples">Examples</h2>

<h3 id="sending-messages">Sending Messages</h3>

<p>You must open a connection to an SMTP server before sending messages.
The first argument is the address of your SMTP server, and the second
argument is the port number. Using SMTP.start with a block is the
simplest way to do this. This way, the SMTP connection is closed
automatically after the block is executed.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">require</span> <span class="s1">'net/smtp'</span>
<span class="no">Net</span><span class="o">::</span><span class="no">SMTP</span><span class="p">.</span><span class="nf">start</span><span class="p">(</span><span class="s1">'your.smtp.server'</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">smtp</span><span class="o">|</span>
  <span class="c1"># Use the SMTP object smtp only in this block.</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Replace ‘your.smtp.server’ with your SMTP server. Normally your system
manager or internet provider supplies a server for you.</p>

<p>Then you can send messages.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">msgstr</span> <span class="o">=</span> <span class="o">&lt;&lt;</span><span class="no">END_OF_MESSAGE</span><span class="sh">
From: Your Name &lt;your@mail.address&gt;
To: Destination Address &lt;someone@example.com&gt;
Subject: test message
Date: Sat, 23 Jun 2001 16:26:43 +0900
Message-Id: &lt;unique.message.id.string@example.com&gt;

This is a test message.
</span><span class="no">END_OF_MESSAGE</span>

<span class="nb">require</span> <span class="s1">'net/smtp'</span>
<span class="no">Net</span><span class="o">::</span><span class="no">SMTP</span><span class="p">.</span><span class="nf">start</span><span class="p">(</span><span class="s1">'your.smtp.server'</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">smtp</span><span class="o">|</span>
  <span class="n">smtp</span><span class="p">.</span><span class="nf">send_message</span> <span class="n">msgstr</span><span class="p">,</span>
                    <span class="s1">'your@mail.address'</span><span class="p">,</span>
                    <span class="s1">'his_address@example.com'</span>
<span class="k">end</span>
</code></pre></div></div>

<h3 id="closing-the-session">Closing the Session</h3>

<p>You MUST close the SMTP session after sending messages, by calling the
<code class="highlighter-rouge">#finish</code> method:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># using SMTP#finish</span>
<span class="n">smtp</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">SMTP</span><span class="p">.</span><span class="nf">start</span><span class="p">(</span><span class="s1">'your.smtp.server'</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
<span class="n">smtp</span><span class="p">.</span><span class="nf">send_message</span> <span class="n">msgstr</span><span class="p">,</span> <span class="s1">'from@address'</span><span class="p">,</span> <span class="s1">'to@address'</span>
<span class="n">smtp</span><span class="p">.</span><span class="nf">finish</span>
</code></pre></div></div>

<p>You can also use the block form of SMTP.start/<code class="highlighter-rouge">SMTP#start</code>. This closes
the SMTP session automatically:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># using block form of SMTP.start</span>
<span class="no">Net</span><span class="o">::</span><span class="no">SMTP</span><span class="p">.</span><span class="nf">start</span><span class="p">(</span><span class="s1">'your.smtp.server'</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">smtp</span><span class="o">|</span>
  <span class="n">smtp</span><span class="p">.</span><span class="nf">send_message</span> <span class="n">msgstr</span><span class="p">,</span> <span class="s1">'from@address'</span><span class="p">,</span> <span class="s1">'to@address'</span>
<span class="k">end</span>
</code></pre></div></div>

<p>I strongly recommend this scheme. This form is simpler and more robust.</p>

<h3 id="helo-domain">HELO domain</h3>

<p>In almost all situations, you must provide a third argument to
SMTP.start/<code class="highlighter-rouge">SMTP#start</code>. This is the domain name which you are on (the
host to send mail from). It is called the “HELO domain”. The SMTP server
will judge whether it should send or reject the SMTP session by
inspecting the HELO domain.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Net::SMTP.start('your.smtp.server', 25,
                'mail.from.domain') { |smtp| ... }
</code></pre></div></div>

<h3 id="smtp-authentication">SMTP Authentication</h3>

<p>The Net::SMTP class supports three authentication schemes; PLAIN, LOGIN
and CRAM MD5. (SMTP Authentication: [RFC2554]) To use SMTP
authentication, pass extra arguments to SMTP.start/<code class="highlighter-rouge">SMTP#start</code>.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># PLAIN</span>
<span class="no">Net</span><span class="o">::</span><span class="no">SMTP</span><span class="p">.</span><span class="nf">start</span><span class="p">(</span><span class="s1">'your.smtp.server'</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="s1">'mail.from.domain'</span><span class="p">,</span>
                <span class="s1">'Your Account'</span><span class="p">,</span> <span class="s1">'Your Password'</span><span class="p">,</span> <span class="ss">:plain</span><span class="p">)</span>
<span class="c1"># LOGIN</span>
<span class="no">Net</span><span class="o">::</span><span class="no">SMTP</span><span class="p">.</span><span class="nf">start</span><span class="p">(</span><span class="s1">'your.smtp.server'</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="s1">'mail.from.domain'</span><span class="p">,</span>
                <span class="s1">'Your Account'</span><span class="p">,</span> <span class="s1">'Your Password'</span><span class="p">,</span> <span class="ss">:login</span><span class="p">)</span>

<span class="c1"># CRAM MD5</span>
<span class="no">Net</span><span class="o">::</span><span class="no">SMTP</span><span class="p">.</span><span class="nf">start</span><span class="p">(</span><span class="s1">'your.smtp.server'</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="s1">'mail.from.domain'</span><span class="p">,</span>
                <span class="s1">'Your Account'</span><span class="p">,</span> <span class="s1">'Your Password'</span><span class="p">,</span> <span class="ss">:cram_md5</span><span class="p">)</span>
</code></pre></div></div>

<p><a href="https://ruby-doc.org/stdlib-2.5.0/libdoc/net/smtp/rdoc/Net::SMTP.html">Net::SMTP
Reference</a></p>



                <!-- Mobile navigation buttons -->


                <!--
                    <a href="cli/cli-tool.html" class="mobile-nav-chapters next">
                        <i class="fa fa-angle-right"></i>
                    </a>
                 -->

            </div>



               <!--
                <a href="cli/cli-tool.html" class="nav-chapters next" title="You can navigate through the chapters using the arrow keys">
                    <i class="fa fa-angle-right"></i>
                </a>
                 -->

        </div>


        <script src="/js/book.js"></script>
    </body>
</html>
